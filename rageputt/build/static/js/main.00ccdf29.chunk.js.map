{"version":3,"sources":["reducers/notificationReducer.js","components/Notification.js","hooks/useStyles.js","components/Vetomenu.js","components/YlaPalkki.js","graphql/fragments.js","graphql/mutations.js","utils/stuff.js","pages/Peli/Player.js","graphql/queries.js","graphql/subscriptions.js","pages/Peli/Tulosruutu.js","hooks/useGetMe.js","utils/apolloCacheUpdate.js","components/DropDown.js","pages/Peli/NewGameModal.js","components/BarChart.js","pages/Peli/PlayerStats.js","components/TabPanel.js","pages/Peli/index.js","hooks/useGetGames.js","pages/Statsit/index.js","reducers/userReducer.js","components/LoginForm.js","hooks/useIsUsernameAvailable.js","pages/Kaverit/FriendRequestForm.js","pages/Kaverit/FriendRequests.js","pages/Kaverit/KaveriLista.js","pages/Kaverit/index.js","pages/Asetukset/OmatTiedot.js","pages/Asetukset/SalasananVaihto.js","pages/Asetukset/VaihdaEmail.js","pages/Asetukset/index.js","components/Button.js","pages/CreateUser/index.js","pages/VanhatPelit/Pelikortti.js","components/YesNoModal.js","pages/VanhatPelit/index.js","pages/Etusivu/index.js","components/RestoreAccount.js","components/DevPage.js","App.js","serviceWorkerRegistration.js","utils/apolloClient.js","reducers/tuloksetReducer.js","utils/store.js","utils/theme.js","index.js"],"names":["setNotification","message","type","title","data","reducer","state","alive","action","Notification","dispatch","useDispatch","notification","useSelector","Snackbar","open","autoHideDuration","onClose","transitionDuration","enter","exit","TransitionProps","direction","Alert","severity","variant","elevation","AlertTitle","useStyles","makeStyles","require","paper","padding","paddingLeft","marginBottom","borderRadius","listPaper","dialogi","divider","margin","Vetomenu","menuOpen","setMenuOpen","notLogged","user","tyylit","Drawer","anchor","IconButton","onClick","ChevronLeft","Divider","className","List","ListItem","button","component","Link","to","disabled","YlaPalkki","openMenu","historia","useHistory","useState","klik","setKlik","resetId","setResetId","console","log","AppBar","position","Toolbar","edge","Typography","style","flexGrow","clearTimeout","push","setTimeout","USER_FULL_INFO","gql","GAME_DETAILS","RESTORE_ACCOUNT","LOGIN","CHANGE_SETTINGS","END_GAME","CREATE_GAME","DELETE_GAME","SET_SCORE","CREATE_USER","ANSWER_FRIEND_REQUEST","SEND_FRIEND_REQUEST","laskePisteet","tulokset","pisteet","dist","i","length","tulokset2ChartData","palautus","putteja","puttejaSisaan","prossa","etaisyys","timestamp2String","ts","aika","Date","setUTCMilliseconds","tunti","getHours","getTimezoneOffset","minsat","getMinutes","getDate","getMonth","getFullYear","RadioButtons","loading","Number","CircularProgress","Grid","item","xs","FormControlLabel","labelPlacement","value","label","control","Radio","color","size","Player","player","round","roundData","setLoading","useMutation","variables","roundId","setScore","distance","isNaN","Card","CardHeader","name","subheader","CardContent","RadioGroup","row","whiteSpace","onChange","e","target","score","catch","finally","container","GET_ME","GET_GAMES","GET_USER_GAMES","GET_ROUND","IS_USERNAME_AVAILABLE","CARD_CHANGED","Tulosruutu","kierrosData","kierros","client","useApolloClient","pushed","useSubscription","getRound","id","useEffect","dataMuistissa","readQuery","query","writeQuery","players","map","p","changedCard","ChevronRight","useGetMe","useQuery","refetch","me","setMe","getMe","updateCache","updateData","dataKey","dataObject","apolloCacheUpdate","ParseOptions","options","mappedOptions","Array","from","keys","k","get","o","DropDown","Select","native","defaultValue","KaveriCheckBox","kaveri","kaverit","setKaverit","Checkbox","includes","filter","concat","icon","PersonOutline","fontSize","checkedIcon","Person","NewGameModal","setModal","handleNewGame","Backdrop","Dialog","fullWidth","maxWidth","PaperProps","Container","FormGroup","checked","friends","f","justify","marginTop","BarChart","otsikko","paperStyle","tyyli","paperProps","Paper","height","text","min","max","argumentField","valueField","PlayerStats","statsit","TabPanel","props","children","index","other","hidden","Peli","modalOpen","tabValue","setTabValue","useLazyQuery","haeRundi","uusiPeli","paataPeli","poistaPeli","pelaajat","a","refetchQueries","res","createGame","handleDeleteGame","handleEndGame","Tabs","event","uusi","Tab","gutterBottom","paragraph","useGetGames","userId","setUserId","games","setGames","error","getGames","Statsit","kaikkiPuttiProssat","kaikkiPisteet","maxPisteet","finished","find","game","kaveritMap","Map","set","v","setUser","LoginForm","loginProcess","setLoginProcess","login","handleLogout","clearStore","window","localStorage","clear","handleLogin","preventDefault","password","then","result","setItem","sailo","onSubmit","spacing","TextField","useIsUsernameAvailable","getName","username","setUsername","available","setAvailable","timerId","setTimerId","isUsernameAvailable","setName","tid","FriendRequestForm","handleSendFriendRequest","helperText","marginLeft","KaveriKortti","handleFriendRequest","alignItems","Check","Cancel","FriendRequests","pyynnot","dense","Kaveri","KaveriLista","Kaverit","answerFriendRequest","sendFriendRequest","friendId","answer","friendRequests","OmatTiedot","email","SalasananVaihto","vaihdaSalasana","uusiPw","uusiPw2","ok","pwHandler","setPwHandler","handleChange","updatedPwHandler","VaihdaEmail","handleChangeEmail","newEmail","setNewEmail","placeholder","test","String","toLowerCase","VaihdaNayttonimi","handleChangeName","newName","setNewName","Asetukset","changeSettings","handleChangeSettings","newSettings","oldSettings","shareStats","handleCelarCache","paddingRight","Switch","Button","marginRight","CreateUserForm","createUser","cuData","tunnus","errors","setErrors","handleSubmit","vars","password2","called","required","Pelikortti","peli","aktivoi","poista","showStats","setShotStats","avatar","timestamp","Collapse","in","unmountOnExit","timeout","paddingTop","reduce","total","cur","toFixed","YesNoModal","close","onYesClick","onNoClick","paddingBottom","width","textAlign","VanhatPelit","poistaPeliId","setPoistaPeliId","g","handlePoistaPeli","Etusivu","Aos","init","duration","data-aos","RestoreAccount","mailSent","setMailSent","restoreAccount","handleResetAccount","DevPage","notify","App","path","CreateUser","isLocalhost","Boolean","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","httpLink","HttpLink","uri","authLink","setContext","_","headers","token","getItem","authorization","socketLink","WebSocketLink","reconnect","splitLink","split","definition","getMainDefinition","kind","operation","ApolloClient","cache","InMemoryCache","link","connectToDevTools","reducers","combineReducers","tuloksetReducer","userReducer","notificationReducer","store","createStore","theme","createMuiTheme","typography","fontFamily","fontWeightLight","fontWeightMedium","fontWeightRegular","fontWeightBold","h3","h4","h5","palette","primary","main","secondary","red","success","info","overrides","MuiAlert","root","MuiCard","MuiListItem","MuiButton","MuiDivider","MuiAppBar","MuiTextField","backgroundColor","MuiOutlinedInput","MuiPaper","MuiContainer","ReactDOM","render","ApolloProvider","ThemeProvider","document","getElementById","URL","process","href","origin","addEventListener","fetch","response","contentType","status","indexOf","ready","unregister","reload","checkValidServiceWorker","serviceWorkerRegistration"],"mappings":"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","file":"static/js/main.00ccdf29.chunk.js","sourcesContent":["const reducer = (state = { alive: false}, action) => {\r\n    switch(action.type) {\r\n        case 'SET_NOTIFICATION':\r\n            return {\r\n                message: action.data.message,\r\n                title: action.data.title,\r\n                type: action.data.type,\r\n                alive: true\r\n            }\r\n        case 'KILL_NOTIFICATION':\r\n           return { ...state, alive:false }\r\n        default:\r\n            return state\r\n    }\r\n}\r\nexport const setNotification = (message, type, title='') => {\r\n    return {\r\n        type: 'SET_NOTIFICATION',\r\n        data: {\r\n            type,\r\n            message,\r\n            title,\r\n        }\r\n    }\r\n}\r\nexport const killNotification = () => {\r\n    return {\r\n        type: 'KILL_NOTIFICATION',\r\n        data: {}\r\n    }\r\n}\r\nexport default reducer;","import { killNotification } from '../reducers/notificationReducer'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport Snackbar from '@material-ui/core/Snackbar'\r\nimport { Alert, AlertTitle } from '@material-ui/lab/'\r\nimport { Slide, Zoom } from '@material-ui/core'\r\n\r\nconst Notification = () => {\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const notification = useSelector(state => state.notification)\r\n\r\n    const handleClose = () => {\r\n        dispatch(killNotification())\r\n    }\r\n    return (\r\n        <Snackbar\r\n            open={notification.alive}\r\n            autoHideDuration={5000}\r\n            onClose={handleClose}\r\n            transitionDuration={{ enter: 1000, exit: 2000 }}\r\n            TransitionProps={{ direction: 'left' }}\r\n        >\r\n            <Alert severity={notification.type} variant=\"filled\" elevation={3} >\r\n                {(notification.title !== '' && <AlertTitle>{notification.title}</AlertTitle>)}\r\n                {notification.message}\r\n            </Alert>\r\n        </Snackbar>\r\n    )\r\n}\r\nexport default Notification","const { makeStyles } = require(\"@material-ui/core\");\r\n\r\nconst useStyles = makeStyles( {\r\n    paper: {\r\n        padding: 5,\r\n        paddingLeft: 15,\r\n        marginBottom: 20,\r\n        borderRadius: 15\r\n    },\r\n    listPaper: {\r\n        borderRadius: 10,\r\n    },\r\n    dialogi: {\r\n        padding: 50,\r\n    },\r\n    divider: {\r\n        margin: 0,\r\n    }\r\n});\r\nexport default useStyles;","import { ChevronLeft } from '@material-ui/icons';\r\nimport { Drawer, Divider, List, ListItem, IconButton } from '@material-ui/core'\r\nimport { Link } from 'react-router-dom'\r\nimport { useSelector } from 'react-redux';\r\nimport useStyles from '../hooks/useStyles';\r\n\r\n\r\n\r\nconst Vetomenu = ({ menuOpen, setMenuOpen }) => {\r\n\r\n    const user = useSelector(state => state.user)\r\n    const notLogged = (!user.user)\r\n    const tyylit = useStyles()\r\n    return (\r\n            <Drawer\r\n                open={menuOpen}\r\n                variant=\"persistent\"\r\n                anchor=\"left\"\r\n            >   \r\n                <IconButton onClick={() => setMenuOpen(false)}>\r\n                    <ChevronLeft />\r\n                </IconButton>\r\n                <Divider className={tyylit.divider}/>\r\n                <List>\r\n                    <ListItem button component={Link} to=\"/\" onClick={() => setMenuOpen(false)}>\r\n                        Etusivu\r\n                    </ListItem>\r\n                </List>\r\n                <Divider className={tyylit.divider} />\r\n\r\n                <List>\r\n                    <ListItem disabled={notLogged} button component={Link} to=\"/peli\" onClick={() => setMenuOpen(false)}>\r\n                        Uusi peli\r\n                    </ListItem>\r\n                </List>\r\n                <Divider className={tyylit.divider} />\r\n                <List>\r\n                    <ListItem disabled={notLogged} button component={Link} to=\"/vanhat\" onClick={() => setMenuOpen(false)}>\r\n                        Vanhat pelit\r\n                    </ListItem>\r\n                    <ListItem disabled={notLogged} button component={Link} to=\"/stats\" onClick={() => setMenuOpen(false)}>\r\n                        Statistiikka\r\n                    </ListItem>\r\n                </List>\r\n                <Divider className={tyylit.divider} />\r\n                <List>\r\n                    <ListItem disabled={notLogged} button component={Link} to=\"/kaverit\" onClick={() => setMenuOpen(false)}>\r\n                        Kaverit\r\n                    </ListItem>\r\n                </List>\r\n                <Divider className={tyylit.divider} />\r\n                <List>\r\n                    <ListItem component={Link} to=\"/asetukset\" disabled={notLogged} button onClick={() => setMenuOpen(false)}>\r\n                        Asetukset\r\n                    </ListItem>\r\n                    <ListItem button component={Link} to=\"/createUser\" onClick={() => setMenuOpen(false)}>\r\n                        Luo tunnus\r\n                    </ListItem>\r\n                    <ListItem button component={Link} to=\"/login\" onClick={() => setMenuOpen(false)}>\r\n                        Kirjaudu sisään\r\n                    </ListItem>\r\n\r\n                </List>\r\n            </Drawer>\r\n    )\r\n}\r\nexport default Vetomenu;","import { AppBar, Toolbar, IconButton, Typography } from '@material-ui/core'\r\nimport MenuIcon from '@material-ui/icons/Menu'\r\nimport { useState } from 'react'\r\nimport { useHistory } from 'react-router'\r\n\r\nconst YlaPalkki = ({ openMenu }) => {\r\n\r\n  const historia = useHistory()\r\n  const [klik, setKlik] = useState(0)\r\n  const [resetId, setResetId] = useState(null)\r\n  const handleClick = () => {\r\n    setKlik(klik + 1)\r\n      if (resetId !== null) clearTimeout(resetId)\r\n    if (klik > 10) historia.push('/dev')\r\n    setResetId(\r\n      setTimeout(() => {\r\n        setKlik(0)\r\n      }, 500)\r\n    )\r\n  }\r\n  console.log(klik)\r\n  return (\r\n    <AppBar position=\"static\">\r\n      <Toolbar>\r\n        <IconButton edge=\"start\" onClick={openMenu}>\r\n          <MenuIcon />\r\n        </IconButton>\r\n        <Typography variant=\"h5\" style={{ flexGrow: 1, marginBottom: 0 }} onClick={handleClick}>\r\n          RagePutt\r\n        </Typography>\r\n      </Toolbar>\r\n    </AppBar>\r\n  )\r\n}\r\nexport default YlaPalkki","import { gql } from \"@apollo/client\";\r\n\r\nexport const USER_FULL_INFO = gql`\r\n    fragment UserFullInfo on User {\r\n        name\r\n        user\r\n        email\r\n        shareStats\r\n        friends { user name id }\r\n        friendRequests { user name id }\r\n        id\r\n    }\r\n`\r\nexport const GAME_DETAILS = gql`\r\n    fragment GameDetails on Game {\r\n        finished\r\n        timestamp\r\n        players { user { user name id } tulokset }\r\n        id\r\n    }\r\n`;","import { gql } from '@apollo/client';\r\nimport { USER_FULL_INFO } from './fragments';\r\n\r\nexport const RESTORE_ACCOUNT = gql`\r\n    mutation restoreAccount( $email: String!) {\r\n        restoreAccount( email: $email )\r\n    }\r\n`\r\nexport const LOGIN = gql`\r\n    mutation login($user: String!, $password: String!) {\r\n        login(\r\n            user: $user\r\n            password: $password\r\n        ) {\r\n            value\r\n            user { user name }\r\n        }\r\n    }\r\n\r\n\r\n`\r\nexport const CHANGE_SETTINGS = gql`\r\n    mutation changeSettings($name: String, $password: String, $email: String, $shareStats: Boolean) {\r\n        changeSettings(\r\n            name: $name,\r\n            password: $password,\r\n            email: $email,\r\n            shareStats: $shareStats\r\n        ) {\r\n            name\r\n            user\r\n            email\r\n            shareStats\r\n            friends { user name id }\r\n            friendRequests { user name id }\r\n        }\r\n    }\r\n`\r\nexport const END_GAME = gql`\r\n    mutation endGame ($id: String!) {\r\n        finishGame(\r\n            roundId: $id\r\n        )\r\n    }\r\n`\r\nexport const CREATE_GAME = gql`\r\n    mutation createGame ($pelaajat: [String]) {\r\n        createGame(\r\n            pelaajat: $pelaajat\r\n        )\r\n    }\r\n`\r\nexport const DELETE_GAME = gql`\r\n    mutation deleteGame ( $roundId: String!) {\r\n        deleteGame(\r\n            roundId: $roundId\r\n        )\r\n    }\r\n`\r\nexport const SET_SCORE = gql`\r\n    mutation setScore($roundId: String!, $round: ID!, $player: String!, $score: Int!) {\r\n        setScore(\r\n            roundId: $roundId\r\n            round: $round\r\n            player: $player\r\n            score: $score\r\n        ) {\r\n            finished\r\n            timestamp\r\n            players {\r\n                user { user }\r\n                tulokset\r\n            }\r\n        }\r\n    }\r\n`\r\nexport const CREATE_USER = gql`\r\n    mutation createUser($user: String!, $password: String!, $name: String, $email: String) {\r\n        createUser(\r\n            user: $user\r\n            password: $password\r\n            name: $name\r\n            email: $email\r\n        ) {\r\n            user\r\n        }\r\n    }\r\n`\r\nexport const ANSWER_FRIEND_REQUEST = gql`\r\n    mutation handleFriendRequest($friendId: String!, $answer: Boolean!) {\r\n        handleFriendRequest(\r\n            friendId: $friendId\r\n            action: $answer\r\n        ) {\r\n            ...UserFullInfo\r\n        }\r\n    }${USER_FULL_INFO}\r\n`\r\nexport const SEND_FRIEND_REQUEST = gql`\r\n    mutation sendFriendRequest($name: String!) {\r\n        sendFriendRequest(\r\n            fName: $name\r\n        )\r\n    }\r\n`","\r\nexport const laskePisteet = (tulokset) => {\r\n\r\n    let pisteet = 0\r\n    let dist = 10\r\n    for (var i = 0; i < tulokset.length; i++ ) {\r\n        if (tulokset[i] === null) return pisteet\r\n        pisteet += tulokset[i]*dist\r\n        dist = 5+tulokset[i]\r\n    }\r\n    return pisteet\r\n}\r\nexport const tulokset2ChartData = (tulokset = [], palautus = [\r\n        { dist: '5m', putteja: 0, puttejaSisaan: 0, prossa: 0 },\r\n        { dist: '6m', putteja: 0, puttejaSisaan: 0, prossa: 0 },\r\n        { dist: '7m', putteja: 0, puttejaSisaan: 0, prossa: 0 },\r\n        { dist: '8m', putteja: 0, puttejaSisaan: 0, prossa: 0},\r\n        { dist: '9m', putteja: 0, puttejaSisaan: 0, prossa: 0},\r\n        { dist: '10m', putteja: 0, puttejaSisaan: 0, prossa: 0 } ]) => {\r\n    \r\n    for (let i=0; i < tulokset.length; i++) {\r\n        if (tulokset[i] === null) return palautus\r\n        const etaisyys = (i !== 0) ? tulokset[i-1] : 5\r\n\r\n        palautus[etaisyys].putteja += 5\r\n        palautus[etaisyys].puttejaSisaan += tulokset[i]\r\n\r\n        palautus[etaisyys].prossa = palautus[etaisyys].puttejaSisaan / palautus[etaisyys].putteja * 100\r\n    }\r\n    return palautus\r\n}\r\nexport const timestamp2String = (ts) => {\r\n    let aika = new Date(0)\r\n    aika.setUTCMilliseconds(ts)\r\n    const tunti = aika.getHours()+aika.getTimezoneOffset()/60\r\n    const minsat = aika.getMinutes()\r\n    return aika.getDate() + \".\" + (aika.getMonth()+1) + \".\" + aika.getFullYear() + \" \" + \r\n        ((tunti < 10) ? '0'+tunti : tunti) + \":\" + \r\n        ( (aika.getMinutes() < 10) ? '0'+minsat : minsat)\r\n}","import { useMutation } from \"@apollo/client\"\r\nimport { CircularProgress, FormControlLabel, Radio, RadioGroup, Grid } from \"@material-ui/core\"\r\nimport { Card, CardHeader, CardContent } from '@material-ui/core'\r\nimport { useState } from \"react\"\r\nimport { useDispatch, useSelector } from 'react-redux'\r\n\r\nimport { SET_SCORE } from \"../../graphql/mutations\"\r\n\r\nimport { setNotification } from \"../../reducers/notificationReducer\"\r\n\r\nimport { laskePisteet } from '../../utils/stuff'\r\n\r\nconst Player = ({ player, round }) => {\r\n\r\n    const roundData = useSelector(state => state.tulokset)\r\n    const dispatch = useDispatch()\r\n\r\n    const [loading, setLoading] = useState(null)\r\n\r\n    const [setScore] = useMutation(SET_SCORE, { variables: { roundId: roundData.roundId } })\r\n\r\n    const handleChange = (e) => {\r\n        setLoading(e.target.value)\r\n        setScore({\r\n            variables: {\r\n                roundId: roundData.roundId,\r\n                round: roundData.round,\r\n                player: player.user.user,\r\n                score: Number(e.target.value)\r\n            }\r\n        }).catch(e => {\r\n            dispatch(setNotification(e.message, 'error'))\r\n        }).finally(() => {\r\n            setLoading(null)\r\n            if (round > 0 && !player.tulokset[round - 1])\r\n                dispatch(setNotification('Kierroksen ' + round + ' tulos puuttuu', 'warning'))\r\n        })\r\n    }\r\n    const distance = (round > 0) ? 5 + player.tulokset[round - 1] : 10\r\n    const pisteet = laskePisteet(player.tulokset)\r\n    let putteja = player.tulokset[round]\r\n    if (isNaN(putteja)) putteja = null\r\n    return (\r\n        <Card className=\"tulos-kortti\" elevation={3}>\r\n            <CardHeader\r\n                title={player.user.name}\r\n                action={distance + 'm'}\r\n                subheader={pisteet + ' points'}\r\n            />\r\n            <CardContent style={{padding: '15px 0px'}}>\r\n                <RadioGroup row style={{ whiteSpace: 'nowrap' }} value={putteja} onChange={handleChange}>\r\n                    <Grid container>\r\n                        <RadioButtons loading={loading} />\r\n                    </Grid>\r\n                </RadioGroup>\r\n            </CardContent>\r\n        </Card>\r\n    )\r\n}\r\nconst RadioButtons = ({ loading }) => {\r\n    const palautus = []\r\n    var i\r\n    for (i = 0; i < 6; i++) {\r\n        if (loading && i === Number(loading)) {\r\n            palautus.push(\r\n                <CircularProgress />\r\n            )\r\n        }\r\n        else {\r\n            palautus.push(\r\n                <Grid item xs\r\n                    key={i}\r\n                >\r\n                    <FormControlLabel\r\n                        labelPlacement=\"top\"\r\n                        value={i}\r\n                        label={i}\r\n                        control={\r\n                            <Radio color=\"primary\" size=\"small\"\r\n                                style={{ padding: '0px' }}\r\n                            />}\r\n                    />\r\n                </Grid>\r\n            )\r\n        }\r\n    }\r\n    return palautus;\r\n}\r\n\r\nexport default Player","import { gql } from '@apollo/client';\r\nimport { USER_FULL_INFO, GAME_DETAILS } from './fragments';\r\n\r\nexport const GET_ME = gql`\r\n    query getMe {\r\n        getMe{\r\n           ...UserFullInfo\r\n        }\r\n    } ${USER_FULL_INFO}\r\n`\r\nexport const GET_GAMES = gql`\r\n    query getGames {\r\n        getGames {\r\n           ...GameDetails\r\n        }\r\n    } ${GAME_DETAILS}\r\n`\r\nexport const GET_USER_GAMES = gql`\r\n    query getGames( $userId: ID ) {\r\n        getGames( userId: $userId ) {\r\n            ...GameDetails\r\n        }\r\n    } ${GAME_DETAILS}\r\n`\r\nexport const GET_ROUND = gql`\r\n    query getRound($roundId: String!) {\r\n        getRound(\r\n            roundId: $roundId\r\n        ) {\r\n            finished\r\n            timestamp\r\n            id\r\n            players {\r\n                user { user name }\r\n                tulokset\r\n            }\r\n        }\r\n    }\r\n`\r\nexport const IS_USERNAME_AVAILABLE = gql`\r\n    query isUsernameAvailable( $user: String! ) {\r\n        isUsernameAvailable( user: $user)\r\n    }\r\n`","import { gql } from '@apollo/client';\r\n\r\nexport const CARD_CHANGED = gql`\r\nsubscription changedCard( $roundId: String!) {\r\n    changedCard( roundId: $roundId) {\r\n        data {\r\n            tulokset\r\n            user { user name }\r\n        }\r\n    }\r\n}\r\n`","import { Grid, IconButton } from '@material-ui/core'\r\nimport { ChevronLeft, ChevronRight } from '@material-ui/icons'\r\nimport { useDispatch } from 'react-redux'\r\nimport Player from './Player'\r\n\r\nimport { useSubscription, useApolloClient } from '@apollo/client'\r\n\r\nimport { GET_ROUND } from '../../graphql/queries'\r\nimport { CARD_CHANGED } from '../../graphql/subscriptions'\r\n\r\nimport { useEffect } from 'react'\r\n\r\nconst Tulosruutu = ({ kierrosData, tulokset }) => {\r\n\r\n    const dispatch = useDispatch()\r\n    const kierros = tulokset.round\r\n\r\n    const client = useApolloClient()\r\n    const pushed = useSubscription(CARD_CHANGED, { variables: { roundId: kierrosData.data.getRound.id } })\r\n\r\n    useEffect(() => {\r\n        if (!pushed.loading) {\r\n            const dataMuistissa = client.readQuery({ query: GET_ROUND, variables: { roundId: kierrosData.data.getRound.id } })\r\n\r\n            if (dataMuistissa !== null) {\r\n\r\n                client.writeQuery({\r\n                    query: GET_ROUND,\r\n                    variables: { roundId: kierrosData.data.getRound.id },\r\n                    data: {\r\n                        getRound: {\r\n                            ...dataMuistissa.getRound,\r\n                            players: dataMuistissa.getRound.players.map(p =>\r\n                                (p.user.user === pushed.data.changedCard.data.user.user)\r\n                                    ? pushed.data.changedCard.data\r\n                                    : p\r\n                            )\r\n                        }\r\n                    }\r\n                })\r\n\r\n            }\r\n\r\n        }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [pushed])\r\n\r\n    return (\r\n        <div>\r\n            <Grid container className=\"rundiValitsin\">\r\n                <Grid item><IconButton onClick={() => dispatch({ type: 'DEC_ROUND' })}><ChevronLeft /></IconButton></Grid>\r\n                <Grid item component={'h2'}> {kierros + 1}/20</Grid>\r\n                <Grid item><IconButton onClick={() => dispatch({ type: 'INC_ROUND' })}><ChevronRight /></IconButton></Grid>\r\n            </Grid>\r\n            {kierrosData.data.getRound.players.map(p => <Player key={p.user.user + 'ppp'} player={p} round={kierros} />)}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Tulosruutu","\r\nimport { useApolloClient, useQuery } from '@apollo/client'\r\nimport { useEffect, useState } from 'react'\r\nimport { GET_ME } from '../graphql/queries'\r\nimport { apolloCacheUpdate } from '../utils/apolloCacheUpdate'\r\n\r\nconst useGetMe = () => {\r\n\r\n    const { loading, data, refetch } = useQuery(GET_ME)\r\n\r\n    const [ me, setMe ] = useState(null)\r\n    const client = useApolloClient()\r\n\r\n    useEffect( () => {\r\n        if (!loading && data) {\r\n            setMe(data.getMe);\r\n        }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [data, loading])\r\n    const updateCache = (updateData) => {\r\n        apolloCacheUpdate(client, GET_ME, updateData, 'getMe')\r\n    }\r\n    return { me, loading, refetch, updateCache };\r\n}\r\n\r\nexport default useGetMe;","\r\nexport const apolloCacheUpdate = (client, query, data, dataKey, variables=null) => {\r\n    const dataObject = {\r\n        query,\r\n        variables,\r\n        data: {}\r\n    }\r\n    dataObject.data[dataKey] = data\r\n    client.writeQuery( dataObject )\r\n}\r\n","import { Select } from \"@material-ui/core\"\r\n\r\nconst DropDown = ( { options, variant=\"outlined\", mappedOptions=false, onChange }) => {\r\n\r\n    return (\r\n        <Select\r\n            native\r\n            defaultValue={0}\r\n            variant={variant}\r\n            onChange={ (e) => onChange(e.target.value) }\r\n        >   \r\n            <ParseOptions options={options} mappedOptions={mappedOptions} />\r\n        </Select>\r\n    )\r\n}\r\nconst ParseOptions = ({ options, mappedOptions}) => {\r\n\r\n    if (mappedOptions === true){\r\n        return Array.from(options.keys()).map(k => <option key={k} value={options.get(k)}>{k}</option>)\r\n    }\r\n    return options.map(o => <option key={o}>{o}</option>)\r\n}\r\nexport default DropDown","import useGetMe from '../../hooks/useGetMe'\r\nimport { Dialog, Typography, Container, Backdrop, CircularProgress, FormControlLabel, Checkbox, Button, Grid, FormGroup } from '@material-ui/core'\r\nimport DropDown from '../../components/DropDown';\r\nimport { useState } from 'react';\r\n\r\nimport { Person, PersonOutline } from '@material-ui/icons'\r\n\r\nconst NewGameModal = ({ open, setModal, handleNewGame }) => {\r\n\r\n    const { me } = useGetMe();\r\n    const [kaverit, setKaverit] = useState([])\r\n\r\n    if (me === null) return (\r\n        <Backdrop open={true}>\r\n            <CircularProgress />\r\n        </Backdrop>\r\n    )\r\n    console.log(kaverit)\r\n    return (\r\n        <Dialog open={open} fullWidth maxWidth=\"xs\" PaperProps={ { style: { borderRadius: 20 }} } >\r\n            <Container>\r\n                    <Typography variant=\"h4\">Uusi peli</Typography>\r\n                    <Typography variant=\"h5\">Pelimoodi: <DropDown options={['Normaali']}></DropDown></Typography>\r\n                    <Typography variant=\"h5\">Valitse pelaajat</Typography>\r\n                    <FormGroup>\r\n                        <FormControlLabel control={<Checkbox checkedIcon={<Person fontSize=\"large\" />} checked={true} />} label=\"Minä\" />\r\n                        {me.friends.map(f => <KaveriCheckBox kaverit={kaverit} setKaverit={setKaverit} key={f.user} kaveri={f} />)}\r\n                    </FormGroup>\r\n                    <Grid container justify=\"space-around\" style={{ marginTop: 20 }}>\r\n                        <Grid item><Button color=\"primary\" variant=\"contained\" onClick={() => handleNewGame(kaverit)}>Aloita peli</Button></Grid>\r\n                        <Grid item><Button color=\"secondary\" variant=\"contained\" onClick={() => setModal(false)}>Peruuta</Button></Grid>\r\n                    </Grid>\r\n            </Container>\r\n        </Dialog>\r\n    )\r\n}\r\nconst KaveriCheckBox = ({ kaveri, kaverit, setKaverit }) => {\r\n    const handleChange = () => {\r\n        if (!kaverit.includes(kaveri.id)) setKaverit(kaverit.concat(kaveri.id))\r\n        else setKaverit(kaverit.filter(k => k !== kaveri.id))\r\n    }\r\n    return (\r\n        <FormControlLabel control={\r\n            <Checkbox\r\n                onChange={handleChange}\r\n                icon={<PersonOutline fontSize=\"large\" />}\r\n                checkedIcon={<Person fontSize=\"large\" color=\"primary\" />}\r\n            />} label={kaveri.name} />\r\n    )\r\n}\r\nexport default NewGameModal","import { Paper } from '@material-ui/core'\r\nimport { ValueAxis, Chart, Title, BarSeries, ArgumentAxis } from '@devexpress/dx-react-chart-material-ui'\r\nimport { Animation } from '@devexpress/dx-react-chart'\r\nimport useStyles from '../hooks/useStyles'\r\n\r\nconst BarChart = ({ data, otsikko='', paperStyle=false, paperProps=null } ) => {\r\n    const tyyli = useStyles()\r\n    return (\r\n        <Paper className={(paperStyle === true) ? tyyli.paper : null}>\r\n            <Chart data={data} height='250'>\r\n                <Title text={otsikko} />\r\n                <ArgumentAxis />\r\n                <ValueAxis min={0} max={100} />\r\n                <BarSeries\r\n                    argumentField=\"dist\"\r\n                    valueField=\"prossa\"\r\n                />\r\n                <Animation />\r\n            </Chart>\r\n        </Paper>\r\n    )\r\n\r\n}\r\nexport default BarChart","import { tulokset2ChartData } from \"../../utils/stuff\"\r\n\r\nimport BarChart from '../../components/BarChart'\r\n\r\nconst PlayerStats = ({ player }) => {\r\n\r\n    const statsit = tulokset2ChartData(player.tulokset)\r\n    return (\r\n            <BarChart data={statsit} otsikko={player.user.name} paperProps={ {\r\n                elevation: 3,\r\n                style: { marginBottom: '5px' }\r\n            }} />\r\n    )\r\n}\r\nexport default PlayerStats","\r\nconst TabPanel = (props) => {\r\n  \r\n    const { children, value, index, ...other } = props;\r\n  \r\n    return (\r\n      <div\r\n        hidden={value !== index}\r\n        {...other}\r\n      >\r\n        {value === index && (\r\n            children\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n  export default TabPanel\r\n  ","import { useMutation, useLazyQuery } from '@apollo/client'\r\nimport { Button, Divider, CircularProgress, Typography } from '@material-ui/core'\r\nimport { Tabs, Tab, Backdrop } from '@material-ui/core'\r\nimport { useEffect, useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport Tulosruutu from './Tulosruutu'\r\nimport NewGameModal from './NewGameModal'\r\nimport PlayerStats from './PlayerStats'\r\nimport { Redirect } from 'react-router'\r\n\r\nimport TabPanel from '../../components/TabPanel'\r\n\r\nimport { GET_ROUND, GET_GAMES } from '../../graphql/queries'\r\nimport { CREATE_GAME, DELETE_GAME, END_GAME } from '../../graphql/mutations'\r\n\r\nimport { Container } from '@material-ui/core'\r\nimport { setNotification } from '../../reducers/notificationReducer'\r\n\r\nconst Peli = () => {\r\n\r\n    const dispatch = useDispatch()\r\n    const [modalOpen, setModal] = useState(false)\r\n    const [tabValue, setTabValue] = useState(0)\r\n\r\n    const tulokset = useSelector(state => state.tulokset)\r\n    const user = useSelector(state => state.user)\r\n\r\n    const [haeRundi, kierrosData] = useLazyQuery(GET_ROUND)\r\n\r\n    const [uusiPeli] = useMutation(CREATE_GAME)\r\n    const [paataPeli] = useMutation(END_GAME)\r\n    const [poistaPeli] = useMutation(DELETE_GAME)\r\n    \r\n    useEffect( () => {\r\n        if (tulokset.roundId && kierrosData.roundId !== tulokset.roundId) {\r\n            try {\r\n                haeRundi({ variables: { roundId: tulokset.roundId } });\r\n            } catch (e) {\r\n                console.log('Virhe peliä hakiessa', e.message)\r\n            }\r\n        }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [tulokset.roundId])\r\n    const handleNewGame = async (pelaajat) => {\r\n        try {\r\n            const res = await uusiPeli({ variables: { pelaajat: pelaajat }, refetchQueries: [{ query: GET_GAMES } ] })\r\n            dispatch({ type: 'SET_ID', data: { roundId: res.data.createGame } })\r\n            dispatch(setNotification('Uusi peli luotu', 'info'))\r\n        } catch (e) {\r\n            dispatch(setNotification('Virhe uuden pelin luonnissa', 'error'))\r\n            console.log(e.message)\r\n        }\r\n        setModal(false);\r\n    }\r\n    const handleDeleteGame = async () => {\r\n        try {\r\n            await poistaPeli({ variables: { roundId: tulokset.roundId }, refetchQueries: [{ query: GET_GAMES }] })\r\n            dispatch({ type: 'RESET_ROUND' })\r\n            dispatch(setNotification('Peli poistettu', 'success'))\r\n        } catch (e) {\r\n            dispatch(setNotification(`Virhe pelin poistamisessa`, 'error'))\r\n            console.log(e.message)\r\n        }\r\n    }\r\n    const handleEndGame = async () => {\r\n\r\n        try {\r\n            await paataPeli({ variables: { id: tulokset.roundId }, refetchQueries: [{ query: GET_GAMES }] })\r\n            dispatch(setNotification('Peli päätetty', 'warning'))\r\n        } catch (e) {\r\n            console.log('Virhe pelin päättämisessä. ' + e.message)\r\n        }\r\n        return (\r\n            <Redirect to=\"/pelit\" />\r\n        )\r\n\r\n    }\r\n    if (!user.user) {\r\n        return (\r\n            <Redirect to=\"/login\" />\r\n        )\r\n    }\r\n    if (kierrosData.loading) {\r\n        return (\r\n            <Backdrop open={true}>\r\n                <CircularProgress />\r\n            </Backdrop>\r\n\r\n        )\r\n    } \r\n    if (tulokset.roundId === null || !kierrosData.data) {\r\n        return (\r\n            <Container>\r\n                <Typography variant=\"h4\" gutterBottom>Pakko päästä puttaa</Typography>\r\n                <Typography paragraph>\r\n                    Ei aktiivista peliä käynnissä. Aloita joko uusi peli tai jatkaa vanhaa peliä.\r\n                </Typography>\r\n                <Typography paragraph>\r\n                    Vanhan pelin jatkaminen onnistuu aktivoimalla se 'Vanhat peli' -osiosta.\r\n                </Typography>\r\n                <Button onClick={() => setModal(true)} color=\"primary\" variant=\"contained\" size=\"large\" fullWidth>Aloita uusi peli</Button>\r\n\r\n                <NewGameModal open={modalOpen} setModal={setModal} handleNewGame={handleNewGame} />\r\n\r\n            </Container>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Tabs\r\n                value={tabValue}\r\n                onChange={(event, uusi) => setTabValue(uusi)}\r\n                variant=\"fullWidth\"\r\n            >\r\n                <Tab label=\"Peli\" />\r\n                <Tab label=\"Asetukset\" />\r\n                <Tab label=\"Statsit\" />\r\n            </Tabs>\r\n\r\n            <Container>\r\n                <TabPanel value={tabValue} index={0}>\r\n                    <Tulosruutu kierrosData={kierrosData} tulokset={tulokset} />\r\n                </TabPanel>\r\n                <TabPanel value={tabValue} index={1}>\r\n\r\n                    <Typography variant=\"h5\" gutterBottom>Poistu pelistä</Typography>\r\n                    <Typography paragraph>\r\n                        Poistu päävalikkoon. Peli on tallennettu ja tulosten merkkaamista voi jatkaa.\r\n                    </Typography>\r\n                    <Button size=\"large\" onClick={() => dispatch({ type: 'RESET_ROUND' })} variant=\"contained\" color=\"primary\" fullWidth>Poistu pelistä</Button>\r\n\r\n                    <Divider style={{ margin: '15px 0px' }} />\r\n\r\n                    <Typography variant=\"h5\" gutterBottom>Päätä peli</Typography>\r\n                    <Typography paragraph>Peli päätetään. Tulosten kirjaaminen suljetaan. Tulokset lasketaan mukaan statistiikkoihin.</Typography>\r\n                    <Button onClick={handleEndGame} size=\"large\" variant=\"contained\" color=\"primary\" fullWidth>Päätä peli</Button>\r\n\r\n                    <Divider style={{ margin: '15px 0px' }} />\r\n\r\n                    <Typography variant=\"h5\" gutterBottom>Poista peli</Typography>\r\n                    <Typography paragraph>Peli poistetaan</Typography>\r\n                    <Button size=\"large\" onClick={handleDeleteGame} variant=\"contained\" color=\"primary\" fullWidth>Poista peli</Button>\r\n                </TabPanel>\r\n                <TabPanel value={tabValue} index={2}>\r\n                    {kierrosData.data.getRound.players.map(p => <PlayerStats player={p} key={'ps' + p.user.user} />)}\r\n                </TabPanel>\r\n            </Container>\r\n        </>\r\n    )\r\n\r\n}\r\n\r\nexport default Peli;","import { useQuery } from \"@apollo/client\"\r\nimport { useEffect, useState } from \"react\"\r\nimport { useDispatch } from \"react-redux\"\r\nimport { GET_USER_GAMES } from \"../graphql/queries\"\r\nimport { setNotification } from \"../reducers/notificationReducer\"\r\n\r\nconst useGetGames = (id = null) => {\r\n\r\n    const [userId, setUserId] = useState(id)\r\n    const dispatch = useDispatch();\r\n    const query = useQuery(GET_USER_GAMES, { variables: { userId } })\r\n    const [games, setGames] = useState(null)\r\n\r\n    useEffect(() => {\r\n        if (!query.loading) {\r\n            if (query.error) {\r\n                dispatch( setNotification('Käyttäjä on estänyt jakamisen', 'error'))\r\n            }\r\n            else { \r\n                setGames(query.data.getGames)\r\n            }\r\n        }\r\n    }, [query])\r\n    return { games, setUserId, userId };\r\n}\r\nexport default useGetGames;","import { ArgumentAxis, ValueAxis, LineSeries, Chart, Title } from '@devexpress/dx-react-chart-material-ui'\r\nimport { Backdrop, CircularProgress, Grid, Container, Typography, Paper } from '@material-ui/core'\r\nimport { useSelector } from 'react-redux'\r\nimport { laskePisteet, tulokset2ChartData } from '../../utils/stuff'\r\nimport BarChart from '../../components/BarChart'\r\nimport { Animation } from '@devexpress/dx-react-chart'\r\nimport DropDown from '../../components/DropDown'\r\nimport useGetMe from '../../hooks/useGetMe'\r\nimport useGetGames from '../../hooks/useGetGames'\r\n\r\nconst Statsit = () => {\r\n\r\n    const { games, setUserId, userId } = useGetGames();\r\n    const user = useSelector(state => state.user)\r\n    const { me } = useGetMe()\r\n    if (games === null || me === null) {\r\n        return (\r\n            <Backdrop open={true}>\r\n                <CircularProgress />\r\n            </Backdrop>\r\n        )\r\n    }\r\n\r\n    let kaikkiPuttiProssat = tulokset2ChartData()\r\n    let kaikkiPisteet = []\r\n    let maxPisteet = 0\r\n    for (let i = 0; i < games.length; i++) {\r\n\r\n        if (!games[i].finished) continue    // Ei lasketa keskeneräisiä pelejä mukaan\r\n        console.log({ userId, user: user.id })\r\n        const player = games[i].players.find(p => p.user.id === (userId) ? userId : me.id )\r\n        kaikkiPuttiProssat = tulokset2ChartData(player.tulokset, kaikkiPuttiProssat)\r\n        const pisteet = laskePisteet(player.tulokset)\r\n        if (pisteet > maxPisteet) maxPisteet = pisteet\r\n        kaikkiPisteet.push({ game: i, score: pisteet })\r\n    }\r\n    const kaveritMap = new Map()\r\n    kaveritMap.set('Minä', me.id)\r\n    for (const kaveri of me.friends)\r\n        kaveritMap.set(kaveri.name, kaveri.id)\r\n    return (\r\n        <Container>\r\n            <Typography variant=\"h5\">\r\n                Pelaaja: <DropDown\r\n                    options={kaveritMap}\r\n                    mappedOptions={true}\r\n                    onChange={(v) => setUserId(v)}\r\n                />\r\n            </Typography>\r\n            <Grid container direction=\"column\">\r\n                <Grid item component={Typography}>\r\n                    Pelejä: {games.length}\r\n                </Grid>\r\n                <Grid item component={Typography}>\r\n                    Paras tulos: {maxPisteet}\r\n                </Grid>\r\n            </Grid>\r\n            <BarChart data={kaikkiPuttiProssat} otsikko=\"Puttiprossat\" paperStyle />\r\n            <Paper style={{ borderRadius: 15}}>\r\n                <Chart data={kaikkiPisteet} height='200'>\r\n                    <Title text=\"Pisteet\" />\r\n                    <ArgumentAxis />\r\n                    <ValueAxis />\r\n                    <LineSeries\r\n                        argumentField=\"game\"\r\n                        valueField=\"score\"\r\n                    />\r\n                    <Animation />\r\n                </Chart>\r\n            </Paper>\r\n        </Container>\r\n    )\r\n}\r\n\r\nexport default Statsit","\r\nconst reducer = (state = {}, action ) => {\r\n    switch(action.type) {\r\n        case 'SET_USER':\r\n            return {\r\n                user: action.data.user,\r\n                name: action.data.name\r\n            }\r\n        case 'CLEAR_USER':\r\n            return {}\r\n        default:\r\n            return state\r\n    }\r\n}\r\nexport const setUser = (name, user) => {\r\n    return {\r\n        type: 'SET_USER',\r\n        data: {\r\n            user,\r\n            name\r\n            \r\n        }\r\n    }\r\n}\r\nexport const clearUser = () => {\r\n    return {\r\n        type: 'CLEAR_USER',\r\n        data: {}\r\n    }\r\n}\r\nexport default reducer","import { useState } from 'react'\r\nimport { Button, TextField, Grid, Backdrop, CircularProgress, Container, Typography, Divider } from '@material-ui/core'\r\nimport { useApolloClient, useMutation } from '@apollo/client'\r\nimport { LOGIN } from '../graphql/mutations'\r\nimport { setUser, clearUser } from '../reducers/userReducer'\r\nimport { setNotification } from '../reducers/notificationReducer'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { Link } from 'react-router-dom'\r\n\r\nconst LoginForm = () => {\r\n\r\n    const dispatch = useDispatch()\r\n    const user = useSelector(state => state.user);\r\n    const [loginProcess, setLoginProcess] = useState(false)\r\n    const [login] = useMutation(LOGIN);\r\n    const client = useApolloClient()\r\n\r\n    const handleLogout = async (e) => {\r\n        await client.clearStore()\r\n        window.localStorage.clear()\r\n        dispatch(clearUser());\r\n        dispatch({ type: 'RESET_ROUND' })\r\n    }\r\n    const handleLogin = async (e) => {\r\n        e.preventDefault()\r\n        setLoginProcess(true);\r\n        login({ variables: { user: e.target.user.value, password: e.target.password.value } }).then(result => {\r\n            window.localStorage.setItem('rageToken', result.data.login.value)\r\n            console.log('Login data: ', result.data.login)\r\n            const sailo = setUser(result.data.login.user.name, result.data.login.user.user);\r\n            dispatch(sailo);\r\n            setLoginProcess(false);\r\n        }).catch(e => {\r\n            dispatch(setNotification('Väärä tunnus tai salasana', 'error'))\r\n            setLoginProcess(false);\r\n        })\r\n    }\r\n    if (user.user) {\r\n        return (\r\n            <Container>\r\n                <Typography variant=\"h4\" gutterBottom>Kirjautunut</Typography>\r\n                <Typography paragraph>Olet kirjautunut tunnuksella <b>{user.user}</b></Typography>\r\n                <Button onClick={handleLogout} variant=\"contained\" color=\"primary\">Kirjaudu ulos</Button>\r\n            </Container>\r\n        )\r\n    }\r\n    return (\r\n        <Container>\r\n            <Backdrop open={loginProcess}>\r\n                <CircularProgress />\r\n            </Backdrop>\r\n            <Typography variant=\"h4\" gutterBottom>Kirjaudu sisään</Typography>\r\n            <form onSubmit={handleLogin}>\r\n                <Grid container spacing={1}>\r\n                    <Grid item xs={12}>\r\n                        <TextField name=\"user\" label=\"Tunnus\" variant=\"outlined\" fullWidth />\r\n                    </Grid>\r\n                    <Grid item xs={12}>\r\n                        <TextField name=\"password\" label=\"Salasana\" variant=\"outlined\" type=\"password\" fullWidth />\r\n                    </Grid>\r\n                    <Grid item xs={12}>\r\n                        <Button type=\"submit\" variant=\"contained\" color=\"primary\" size=\"large\">Kirjaudu</Button>\r\n                    </Grid>\r\n                </Grid>\r\n            </form>\r\n            <Divider />\r\n            <Typography variant=\"h6\">Unohtuiko salasana</Typography>\r\n            <Typography paragraph>\r\n                <Link to=\"/palautus\">Voi ei, unohdin salasanani</Link>\r\n            </Typography>\r\n        </Container>\r\n    )\r\n}\r\n\r\nexport default LoginForm;","import { useLazyQuery } from \"@apollo/client\"\r\nimport { useEffect, useState } from \"react\"\r\nimport { IS_USERNAME_AVAILABLE } from \"../graphql/queries\"\r\n\r\nconst useIsUsernameAvailable = () => {\r\n    \r\n    const [ getName, { loading, data } ] = useLazyQuery(IS_USERNAME_AVAILABLE)\r\n    const [ username, setUsername ] = useState('')\r\n    const [ available, setAvailable] = useState(null)\r\n    const [ timerId, setTimerId ] = useState(null)\r\n\r\n    useEffect( () => {\r\n        if (!loading && data) {\r\n            if (username !== '')\r\n                setAvailable( data.isUsernameAvailable )\r\n        }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [data, loading])\r\n\r\n    const setName = (name) => {\r\n        setUsername(name)\r\n        if (name === '') setAvailable(null)\r\n        else setAvailable('loading')\r\n        \r\n        if (timerId !== null) clearTimeout(timerId)\r\n        \r\n        const tid = setTimeout( () => {\r\n            getName({ variables: { user: name }})\r\n        }, 1000)\r\n        setTimerId(tid)\r\n    }\r\n    return { username, setName, available }\r\n}\r\nexport default useIsUsernameAvailable","import { Button, CircularProgress, TextField, Typography } from '@material-ui/core'\r\nimport useIsUsernameAvailable from '../../hooks/useIsUsernameAvailable'\r\n\r\nconst FriendRequestForm = ({ handleSendFriendRequest }) => {\r\n\r\n    const { username, setName, available } = useIsUsernameAvailable()\r\n    return (\r\n        <>\r\n            <Typography variant=\"h5\">Lähetä kaveripyyntö</Typography>\r\n            <form onSubmit={handleSendFriendRequest}>\r\n                <TextField label=\"Nimi\" variant=\"outlined\" name=\"kaveri\" size=\"small\"\r\n                    style={{ color: 'green' }}\r\n                    value={username}\r\n                    onChange={(e) => setName(e.target.value)}\r\n                    error={(available === true)}\r\n                    helperText={(available === true) ? 'Nimeä ei löydy' : ''}\r\n                />\r\n                {(available === 'loading' && <span style={{ marginLeft: 10 }}><CircularProgress /></span>)}\r\n                <br /><Button disabled={(available !== false)} type=\"submit\" variant=\"contained\" size=\"large\" color=\"primary\" style={{ marginTop: '5px' }}>Lähetä</Button>\r\n            </form>\r\n        </>\r\n    )\r\n}\r\nexport default FriendRequestForm","import { IconButton, Paper, Typography, Grid, List, ListItem } from '@material-ui/core'\r\nimport { Cancel, Check } from '@material-ui/icons/'\r\nimport useStyles from '../../hooks/useStyles'\r\n\r\nconst FriendRequests = ({ pyynnot, handleFriendRequest }) => {\r\n    return (\r\n        <>\r\n            <Typography variant=\"h5\">Kaveripyynnöt</Typography>\r\n            <List dense={true}>\r\n                {pyynnot.map(k => <KaveriKortti handleFriendRequest={handleFriendRequest} kaveri={k} key={k.id} />)}\r\n            </List>\r\n        </>\r\n    )\r\n}\r\nconst KaveriKortti = ({ kaveri, handleFriendRequest }) => {\r\n    const tyylit = useStyles()\r\n    return (\r\n        <ListItem>\r\n            <Grid container component={Paper} elevation={3}  className={tyylit.listPaper} justify=\"space-between\" alignItems=\"center\">\r\n                <Grid item xs={8}>\r\n                    {kaveri.user} ({kaveri.name})\r\n                </Grid>\r\n                <Grid item>\r\n                    <IconButton onClick={() => handleFriendRequest(kaveri.id, true)}>\r\n                        <Check style={{ color: 'green' }} />\r\n                    </IconButton>\r\n                    <IconButton onClick={() => handleFriendRequest(kaveri.id, false)}>\r\n                        <Cancel style={{ color: '#ff4040' }} />\r\n                    </IconButton>\r\n                </Grid>\r\n            </Grid>\r\n        </ListItem>\r\n    )\r\n}\r\nexport default FriendRequests","import { Typography, Paper, List, ListItem } from \"@material-ui/core\"\r\n\r\nconst KaveriLista = ({ kaverit }) => {\r\n    return (\r\n        <>\r\n            <Typography variant=\"h6\">Sinulla on {kaverit.length} kaveria</Typography>\r\n            <List dense={true}>\r\n                {kaverit.map(k => <Kaveri key={k.user} kaveri={k} />)}\r\n            </List>\r\n        </>\r\n    )\r\n}\r\nconst Kaveri = ({ kaveri }) => {\r\n    return (\r\n        <ListItem>\r\n            <Paper elevation={3} >\r\n                <strong>{kaveri.name}</strong> ({kaveri.user})\r\n            </Paper>\r\n        </ListItem>\r\n    )\r\n}\r\nexport default KaveriLista","import { useMutation } from \"@apollo/client\"\r\nimport FriendRequestForm from \"./FriendRequestForm\"\r\nimport FriendRequests from \"./FriendRequests\"\r\nimport { useDispatch } from 'react-redux'\r\nimport { setNotification } from '../../reducers/notificationReducer'\r\n\r\nimport { CircularProgress, Container, Divider, Typography, Button } from '@material-ui/core'\r\n\r\nimport { ANSWER_FRIEND_REQUEST, SEND_FRIEND_REQUEST } from \"../../graphql/mutations\"\r\n\r\nimport KaveriLista from \"./KaveriLista\"\r\n\r\nimport useGetMe from \"../../hooks/useGetMe\"\r\n\r\nconst Kaverit = () => {\r\n\r\n    const { me, loading, refetch, updateCache } = useGetMe();\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const [answerFriendRequest] = useMutation(ANSWER_FRIEND_REQUEST)\r\n    const [sendFriendRequest] = useMutation(SEND_FRIEND_REQUEST)\r\n\r\n    const handleSendFriendRequest = (e) => {\r\n        e.preventDefault()\r\n        sendFriendRequest({ variables: { name: e.target.kaveri.value } }).then(res => {\r\n            dispatch(setNotification('Kaveripyyntö lähetetty!', 'success'))\r\n        }).catch(e => {\r\n            dispatch(setNotification('Pyyntö epäonnistui: ' + e.message, 'error'))\r\n        })\r\n        e.target.kaveri.value = ''\r\n    }\r\n    const handleFriendRequest = async (friendId, answer) => {\r\n        try {\r\n            const res = await answerFriendRequest({ variables: { friendId, answer } })\r\n            updateCache(res.data.handleFriendRequest)\r\n            dispatch(setNotification('Kaveripyyntö käsitelty', 'success'))\r\n\r\n        } catch(e) {\r\n            console.log(e)\r\n            dispatch(setNotification('Tapahtui virhe: ' + e.message, 'error'))\r\n\r\n        }\r\n    }\r\n    const refetchMe = () => {\r\n        refetch();\r\n    }\r\n    if (loading || !me) {\r\n        return (<CircularProgress />)\r\n    }\r\n    console.log(me)\r\n    return (\r\n        <Container>\r\n            <Typography variant=\"h4\">Kaverit</Typography>\r\n            <KaveriLista kaverit={me.friends} />\r\n            <Divider />\r\n            <FriendRequestForm handleSendFriendRequest={handleSendFriendRequest} />\r\n            <Divider />\r\n            {(me.friendRequests.length > 0 && <FriendRequests pyynnot={me.friendRequests} handleFriendRequest={handleFriendRequest} />)}\r\n            <Button fullWidth variant=\"outlined\" onClick={refetchMe}>Päivitä kaveripyynnöt</Button>\r\n\r\n        </Container>\r\n    )\r\n\r\n}\r\n\r\nexport default Kaverit","import { Typography } from \"@material-ui/core\"\r\n\r\nconst OmatTiedot = ({ me }) => {\r\n    return (\r\n        <div>\r\n            <Typography variant=\"h4\" gutterBottom>Tiedot</Typography>\r\n            <Typography variant=\"h6\">Tunnus</Typography>\r\n            <Typography>{me.user}</Typography>\r\n\r\n            <Typography variant=\"h6\">Näyttönimi</Typography>\r\n            <Typography>{me.name}</Typography>\r\n\r\n            <Typography variant=\"h6\">Sähköposti</Typography>\r\n            <Typography>{me.email}</Typography>\r\n        </div>\r\n    )\r\n}\r\nexport default OmatTiedot","import { Grid, Typography, TextField, Button } from '@material-ui/core'\r\nimport { useState } from 'react'\r\n\r\nconst SalasananVaihto = ({ vaihdaSalasana }) => {\r\n\r\n    \r\n    const [ pwHandler, setPwHandler ] = useState({\r\n        uusiPw: '',\r\n        uusiPw2: '',\r\n        ok: false\r\n    })\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault()\r\n        vaihdaSalasana( { password: pwHandler.uusiPw } )\r\n        setPwHandler( { uusiPw: '', uusiPw2: '', ok: false })\r\n    }\r\n    const handleChange = (e) => {\r\n        const updatedPwHandler = {...pwHandler}\r\n        updatedPwHandler[e.target.name] = e.target.value\r\n        if (updatedPwHandler.uusiPw === updatedPwHandler.uusiPw2 && updatedPwHandler.uusiPw !== '')\r\n            updatedPwHandler.ok = true\r\n        else updatedPwHandler.ok = false\r\n        setPwHandler(updatedPwHandler)\r\n    }\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit}>\r\n            <Typography variant=\"h5\" gutterBottom>Vaihda salasana</Typography>\r\n\r\n            <Grid container spacing={1}>\r\n                <Grid item xs={12}>\r\n                    <TextField variant=\"outlined\" value={pwHandler.uusiPw} name=\"uusiPw\" label=\"Uusi salasana\" size=\"small\" type=\"password\" onChange={handleChange}/>\r\n                </Grid>\r\n                <Grid item xs={12}>\r\n                    <TextField variant=\"outlined\" value={pwHandler.uusiPw2} name=\"uusiPw2\" label=\"Uusi uudestaan\" size=\"small\" type=\"password\" onChange={handleChange} />\r\n                </Grid>\r\n                <Grid item>\r\n                    <Button variant=\"contained\" color=\"primary\" type=\"submit\" disabled={!pwHandler.ok}>Vaihda</Button>\r\n                </Grid>\r\n            </Grid>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default SalasananVaihto","import { Typography, TextField } from \"@material-ui/core\";\r\nimport { useState } from \"react\";\r\nimport Button from '@material-ui/core/Button'\r\n\r\nconst VaihdaEmail = ({ handleChangeEmail }) => {\r\n\r\n    const [newEmail, setNewEmail ] = useState('')\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        handleChangeEmail({ email: newEmail })\r\n        setNewEmail('')\r\n    }\r\n    function validateEmail(email) {\r\n        const re = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n        return re.test(String(email).toLowerCase());\r\n    }\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit}>\r\n            <Typography variant=\"h5\" label=\"email\">Vaihda email</Typography>\r\n            <TextField variant=\"outlined\" \r\n                name=\"email\" \r\n                value={newEmail} \r\n                placeholder=\"Uusi email\" \r\n                size=\"small\" \r\n                onChange={(e) => setNewEmail(e.target.value)}\r\n            />\r\n            &nbsp;<Button variant=\"contained\" color=\"primary\" type=\"submit\" disabled={!(validateEmail(newEmail))}>Vaihda</Button>\r\n        </form>\r\n    )\r\n\r\n}\r\nexport default VaihdaEmail;","import { Backdrop, CircularProgress, TextField, Button, Container, Typography, Divider, Switch, Grid } from \"@material-ui/core\"\r\nimport { useState } from \"react\";\r\n\r\nimport useGetMe from \"../../hooks/useGetMe\";\r\nimport OmatTiedot from \"./OmatTiedot\";\r\n\r\nimport SalasananVaihto from './SalasananVaihto'\r\nimport VaihdaEmail from './VaihdaEmail';\r\n\r\nimport { CHANGE_SETTINGS } from \"../../graphql/mutations\";\r\nimport { useApolloClient, useMutation } from \"@apollo/client\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { setNotification } from \"../../reducers/notificationReducer\";\r\n\r\nconst Asetukset = () => {\r\n\r\n    const { me, updateCache } = useGetMe();\r\n    const dispatch = useDispatch()\r\n    const [changeSettings] = useMutation(CHANGE_SETTINGS)\r\n    const client = useApolloClient()\r\n\r\n    const handleChangeSettings = async (newSettings) => {\r\n        const oldSettings = {\r\n            name: '',\r\n            email: '',\r\n            password: '',\r\n            shareStats: null,\r\n        }\r\n        try {\r\n            const me = await changeSettings({ variables: { ...oldSettings, ...newSettings } })\r\n            updateCache(me.data.changeSettings)\r\n            dispatch(setNotification('Tietoja vaihdettu', 'success'))\r\n        } catch (e) {\r\n            console.log(e)\r\n            dispatch(setNotification(`Virhe! ${e.message}`, 'error'))\r\n\r\n        }\r\n    }\r\n\r\n    const handleCelarCache = async () => {\r\n        await client.clearStore()\r\n        dispatch(setNotification('Välimuisti tyhjennetty', 'info'))\r\n    }\r\n    if (me === null) {\r\n        return (\r\n            <Backdrop open={true}>\r\n                <CircularProgress />\r\n            </Backdrop>\r\n        )\r\n    }\r\n    console.log(me)\r\n    return (\r\n        <Container>\r\n            <OmatTiedot me={me} />\r\n            <Divider />\r\n            <Grid container justify=\"space-between\" direction=\"row\" alignItems=\"center\">\r\n                <Grid item xs={8} component={Typography} >\r\n                    Salli kavereiden nähdä tilastoni\r\n                </Grid>\r\n                <Grid item style={{ paddingRight: 10 }}>\r\n                    <Switch color=\"primary\" checked={(me?.shareStats)} onChange={() => handleChangeSettings({ shareStats: !me.shareStats })} />\r\n                </Grid>\r\n            </Grid>\r\n\r\n            <Divider />\r\n            <SalasananVaihto vaihdaSalasana={handleChangeSettings} />\r\n            <Divider />\r\n            <VaihdaNayttonimi handleChangeName={handleChangeSettings} />\r\n            <Divider />\r\n            <VaihdaEmail me={me} handleChangeEmail={handleChangeSettings} />\r\n            <Divider />\r\n            <Typography variant=\"h5\">Tyhjennä välimuisti</Typography>\r\n            <Typography paragraph>Jos tuntuu että asiat eivät näy oikein, voit yrittää tyhjentää välimuistin.</Typography>\r\n            <Button variant=\"outlined\" color=\"secondary\" fullWidth onClick={handleCelarCache}>Tyhjennä välimuisti</Button>\r\n        </Container>\r\n    )\r\n\r\n}\r\nconst VaihdaNayttonimi = ({ handleChangeName }) => {\r\n\r\n    const [newName, setNewName] = useState('')\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault()\r\n        handleChangeName({ name: newName })\r\n        setNewName('')\r\n\r\n    }\r\n    return (\r\n        <form onSubmit={handleSubmit}>\r\n            <Typography variant=\"h5\">Vaihda näyttönimi</Typography>\r\n            <TextField value={newName} variant=\"outlined\" label=\"Uusi nimi\" size=\"small\" onChange={(e) => setNewName(e.target.value)} />\r\n            &nbsp;<Button variant=\"contained\" type=\"submit\" disabled={(newName.length < 3)} color=\"primary\">Ok</Button>\r\n        </form>\r\n\r\n    )\r\n}\r\nexport default Asetukset","import { Button as Nbutton } from '@material-ui/core'\r\n\r\nconst Button = ({ children, variant=\"contained\", color=\"primary\", ...props }) => {\r\n    const style = {\r\n        margin: '7px 0px',\r\n        marginRight: 5\r\n    }\r\n    return <Nbutton {...props} variant={variant} color={color} style={style}>{children}</Nbutton>\r\n}\r\n\r\nexport default Button;","import { useMutation } from \"@apollo/client\"\r\nimport { TextField, Divider, Container, Typography, Grid } from \"@material-ui/core\"\r\nimport { useState } from \"react\"\r\nimport { useDispatch } from \"react-redux\"\r\nimport { Redirect } from \"react-router\"\r\nimport { setNotification } from \"../../reducers/notificationReducer\"\r\n\r\nimport { CREATE_USER } from '../../graphql/mutations'\r\n\r\nimport Button from '../../components/Button'\r\nimport useIsUsernameAvailable from \"../../hooks/useIsUsernameAvailable\"\r\n\r\nconst CreateUserForm = () => {\r\n\r\n    const [createUser, cuData] = useMutation(CREATE_USER)\r\n    const dispatch = useDispatch()\r\n\r\n    const { username, setName, available } = useIsUsernameAvailable()\r\n\r\n    const [errors, setErrors] = useState({ tunnus: false, password: false })\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        const vars = {\r\n            user: e.target.user.value,\r\n            password: e.target.password.value,\r\n            name: e.target.name.value,\r\n            email: e.target.email.value\r\n        }\r\n        if (vars.user === '') {\r\n            setErrors({ ...errors, tunnus: true })\r\n        } else if (vars.password === '' || vars.password !== e.target.password2.value) {\r\n            setErrors({ ...errors, password: true })\r\n        }\r\n        else {\r\n            try {\r\n                await createUser({ variables: vars })\r\n                dispatch(setNotification('Tunnukset luotiin onnistuneesti', 'success'))\r\n            } catch (e) {\r\n                dispatch(setNotification('Virhe tunnusten luonnissa: ' + e.message, 'error'))\r\n            }\r\n        }\r\n    }\r\n    if (cuData.loading) {\r\n        return (<h2>Creating user...</h2>)\r\n    }\r\n    if (cuData.called && !cuData.error) {\r\n        return (<Redirect to=\"/login\" />)\r\n    }\r\n    return (\r\n        <Container>\r\n            <Typography variant=\"h4\">Luo tunnus</Typography>\r\n            <Typography variant=\"h5\">Perustiedot</Typography>\r\n            <form onSubmit={handleSubmit}>\r\n                <Grid container direction=\"column\" spacing={1}>\r\n                    <Grid item>\r\n                        <TextField error={errors.tunnus || available === false } name=\"user\" label=\"Tunnus\" variant=\"outlined\" required \r\n                            value={username}\r\n                            onChange={(e) => setName(e.target.value)}\r\n                            helperText={ (available === false) ? 'Tunnus on jo käytössä' : ''}\r\n                        />\r\n                    </Grid>\r\n                    <Grid item>\r\n                        <TextField error={errors.password} name=\"password\" type=\"password\" label=\"Salasana\" variant=\"outlined\" required  />\r\n                    </Grid>\r\n                    <Grid item>\r\n                        <TextField error={errors.password} name=\"password2\" label=\"Salasana uudestaan\" type=\"password\" variant=\"outlined\" required />\r\n                    </Grid>\r\n                </Grid>\r\n\r\n                <Divider />\r\n                <Typography variant=\"h5\" gutterBottom>Lisätiedot</Typography>\r\n                <Typography paragraph>Ei pakollisia. Sähköpostiosoitteen antaminen mahdollistaa tunnuksen palauttamisen.</Typography>\r\n\r\n                <Grid container direction=\"column\" spacing={1}>\r\n                    <Grid item>\r\n                    <TextField name=\"name\" label=\"Nimi\" variant=\"outlined\" />\r\n\r\n                    </Grid>\r\n                    <Grid item>\r\n                    <TextField name=\"email\" label=\"Sähköposti\" variant=\"outlined\" fullWidth />\r\n\r\n                    </Grid>\r\n                    <Grid item>\r\n                    <Button disabled={(available === false)} type=\"submit\" size=\"large\" variant=\"contained\"color=\"primary\">Luo tunnus</Button>\r\n                    </Grid>\r\n                </Grid>\r\n            </form>\r\n        </Container>\r\n    )\r\n}\r\n\r\nexport default CreateUserForm","import { Button, Card, CardHeader, CardContent, Collapse } from '@material-ui/core'\r\nimport { laskePisteet, timestamp2String, tulokset2ChartData } from '../../utils/stuff'\r\nimport { useState } from 'react'\r\nimport { IconButton, Typography } from '@material-ui/core'\r\n\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\r\nimport WarningIcon from '@material-ui/icons/Warning'\r\n\r\nimport BarChart from '../../components/BarChart'\r\n\r\nconst Pelikortti = ({ peli, aktivoi, poista, user }) => {\r\n\r\n    let { tulokset } = peli.players.find(p => p.user.user === user)\r\n    const pisteet = laskePisteet(tulokset)\r\n\r\n    const [showStats, setShotStats] = useState(false)\r\n\r\n    if (tulokset.length === 0) {\r\n        tulokset = [0]\r\n    }\r\n    return (\r\n        <Card style={{ marginBottom: '5px' }} variant=\"outlined\">\r\n            <CardHeader\r\n                avatar= {\r\n                    (!peli.finished && <WarningIcon style={{color: 'orange'}}/>)\r\n                }\r\n                action={\r\n                    <IconButton onClick={() => setShotStats(!showStats)} size=\"small\">\r\n                        <ExpandMoreIcon />\r\n                    </IconButton>\r\n                }\r\n\r\n                title={ (showStats) ? pisteet : null}\r\n                subheader={ ((showStats) ? timestamp2String(peli.timestamp) : pisteet) }\r\n            />\r\n            <Collapse in={showStats} unmountOnExit timeout=\"auto\">\r\n                <CardContent style={{paddingTop: '0px'}}>\r\n                    <Button size=\"small\" variant=\"outlined\" color=\"primary\" onClick={() => aktivoi(peli.id)}>Aktivoi</Button>&nbsp;                                 \r\n                    <Button size=\"small\" variant=\"outlined\" color=\"secondary\" onClick={() => poista(peli.id)}>Poista</Button>\r\n                    <Typography>\r\n                        Puttiprossa: { (tulokset.reduce((total, cur) => total+cur) / (tulokset.length*5) * 100).toFixed()}\r\n                    </Typography>\r\n                    <BarChart data={tulokset2ChartData(tulokset)} />\r\n                </CardContent>\r\n            </Collapse>\r\n        </Card>\r\n    )\r\n\r\n}\r\nexport default Pelikortti","import { Button, Container, Dialog, Grid, Typography } from \"@material-ui/core\"\r\n\r\nconst YesNoModal = ({ open, \r\n    title = \"Oletko varma?\", \r\n    text = \"Aivan varma?\",\r\n    close=null,\r\n    onYesClick,\r\n    onNoClick=null\r\n}) => {\r\n    if (!open) return null\r\n    return (\r\n        <Dialog open onClick={close}>\r\n            <Container style={{ paddingBottom: '15px'}}>\r\n                <Typography variant=\"h4\" gutterBottom>{title}</Typography>\r\n                <Typography paragraph>{text}</Typography>\r\n                <Grid container style={{ flexGrow: 1, width: '100%', textAlign: 'center' }}>\r\n                    <Grid item xs={6} >\r\n                        <Button variant=\"contained\" color=\"primary\" onClick={onYesClick}>Kyllä</Button>\r\n                    </Grid>\r\n                    <Grid item xs={6}>\r\n                        <Button variant=\"contained\" color=\"secondary\" onClick={onNoClick}>Ei</Button>\r\n                    </Grid>\r\n                </Grid>\r\n            </Container>\r\n        </Dialog>\r\n    )\r\n}\r\nexport default YesNoModal","import { useMutation, useQuery } from \"@apollo/client\"\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport { Redirect } from \"react-router\"\r\nimport { GET_GAMES } from \"../../graphql/queries\"\r\nimport { DELETE_GAME } from '../../graphql/mutations'\r\nimport { Backdrop, CircularProgress, Container, Typography } from '@material-ui/core'\r\nimport Pelikortti from \"./Pelikortti\"\r\n\r\nimport { setNotification } from '../../reducers/notificationReducer'\r\nimport { useState } from \"react\"\r\nimport YesNoModal from \"../../components/YesNoModal\"\r\n\r\nconst VanhatPelit = () => {\r\n\r\n    const getGames = useQuery(GET_GAMES)\r\n    const user = useSelector(state => state.user)\r\n    const dispatch = useDispatch()\r\n    const [poistaPeliId, setPoistaPeliId] = useState(null)\r\n    const [poistaPeli] = useMutation(DELETE_GAME)\r\n\r\n    const aktivoi = (g) => {\r\n        dispatch({ type: 'SET_ID', data: { roundId: g } })\r\n        dispatch(setNotification('Siirry peliin valitsemalla \\'Uusi peli\\'', 'info', 'Peli aktivoitu'))\r\n    }\r\n    const handlePoistaPeli = async () => {\r\n        console.log('Poistetaan', poistaPeliId)\r\n        try {\r\n            poistaPeli({ variables: { roundId: poistaPeliId }, refetchQueries: [{ query: GET_GAMES }] })\r\n            dispatch( setNotification('Peli poistettu', 'success'))\r\n        } catch (e) {\r\n            dispatch( setNotification('Virhe pelin poistamisessa', 'error'))\r\n            console.log(e.message)\r\n        }\r\n    }\r\n    if (!user.user) {\r\n        return (\r\n            <Redirect to=\"/login\" />\r\n        )\r\n    }\r\n\r\n    if (getGames.loading) {\r\n        return (\r\n            <Backdrop open={true}>\r\n                <CircularProgress />\r\n            </Backdrop>\r\n        )\r\n    }\r\n    console.log(getGames)\r\n    return (\r\n        <div>\r\n            <Container>\r\n                <Typography variant=\"h5\" gutterBottom>Vanhat peli</Typography>\r\n                {getGames.data.getGames.map(g =>\r\n                    <Pelikortti user={user.user}\r\n                        aktivoi={aktivoi} poista={(roundId) => setPoistaPeliId(roundId)}\r\n                        peli={g} key={g.id}\r\n                    />)}\r\n            </Container>\r\n            <YesNoModal open={(poistaPeliId)}\r\n                title=\"Oletko varma?\"\r\n                text=\"Haluatko varmasti poistaa pelin?\"\r\n                close={() => setPoistaPeliId(false)}\r\n                onYesClick={handlePoistaPeli}\r\n            />\r\n\r\n        </div>\r\n    )\r\n}\r\nexport default VanhatPelit","import { Container, Typography, Paper, Link } from '@material-ui/core'\r\nimport useStyles from '../../hooks/useStyles'\r\n\r\nimport Aos from 'aos';\r\nimport 'aos/dist/aos.css';\r\nimport { useEffect } from 'react';\r\n\r\nconst Etusivu = () => {\r\n\r\n    const tyylit = useStyles()\r\n\r\n    useEffect(() => {\r\n        Aos.init({ duration: 3000 })\r\n    }, [])\r\n\r\n    return (\r\n        <Container>\r\n            <Paper className={tyylit.paper} id=\"iso-naytto\">\r\n                <Typography variant=\"h4\">\r\n                    Iso näyttö\r\n                </Typography>\r\n                <Typography paragraph>\r\n                    Onpas Teillä todella suuri ja mahtava näyttö. Tiedoksenne että\r\n                    tämä sovellus on suunniteltu käytettäväksi kännykän pikkuruiselta näytöltä.\r\n                </Typography>\r\n            </Paper>\r\n            <Paper className={tyylit.paper} data-aos=\"fade-up\">\r\n                <Typography variant=\"h4\">\r\n                    Mitä tämä on?\r\n                </Typography>\r\n                <Typography paragraph>\r\n                    Rageputt on Fullstackopen 2021 -kurssin harjoitustyön tulos. Fullstackopen on Helsingin yliopiston\r\n                    järjestämä kurssi jossa tutustutaan JavaScriptilla tapahtuvaan moderniin websovelluskehitykseen. Pääpaino on\r\n                    React-kirjaston avulla toteutettavissa single page -sovelluksissa, ja niitä tukevissa Node.js:llä toteutetuissa\r\n                    REST-rajapinnoissa.\r\n                </Typography>\r\n                <Typography paragraph>\r\n                    <Link>fullstackopen.com</Link>\r\n                </Typography>\r\n            </Paper>\r\n            <Paper className={tyylit.paper} data-aos=\"fade-up\">\r\n                <Typography variant=\"h4\">\r\n                    Rageputt\r\n                </Typography>\r\n                <Typography paragraph>\r\n                    Sovelluksen idea on pitää kirjaa frisbeegolffin JYLY-puttipelin tuloksista. Tulokset tallentuvat palvelimelle\r\n                    reaaliaikaisesti. Pelejä voi pelata yksin tai yhdessä kaverin kanssa. Jokaisella peliin osallistuvalla tulee\r\n                    olla oma tunnus. Pelatessa porukalla tarvitsee vain yhden henkilön kirjata tuloksia sillä tulokset päivittyvät\r\n                    automaattisesti kaikille pelaajille.\r\n                </Typography>\r\n\r\n            </Paper>\r\n            <Paper className={tyylit.paper} data-aos=\"fade-up\">\r\n                <Typography variant=\"h4\">\r\n                    JYLY?!?\r\n                </Typography>\r\n                <Typography paragraph>\r\n                    JYLY Putting game is a putt practice drill/game created by Markus Lindqvist\r\n                    (found by nickename JYLY in dgcr forums as well as frisbeegolf-forum). The drill\r\n                    emphasizes putting from various distances. The more putts you sink and the further\r\n                    you do it, more points you get. (copypaste)\r\n                </Typography>\r\n            </Paper>\r\n            <Paper className={tyylit.paper} data-aos=\"fade-up\">\r\n                <Typography variant=\"h4\">\r\n                    Kerro lisää\r\n                </Typography>\r\n                <Typography paragraph>\r\n                    Jotta voit käyttää sovellusta, tulee sinun luoda oma tunnus. Tunnuksen luomiseen riittää vain että keksit itsellesi\r\n                    tunnuksen ja salasanan. Voit myös antaa sähköpostiosoitteesi siltä varalta että unohdat\r\n                    salasanasi.\r\n                </Typography>\r\n                <Typography paragraph>\r\n                    Tunnuksen luotuasi voit aloittaa armottoman puttaamisen. Myöhemmin kun on liian pimeää puttaamiselle, voit ihailla ihanaa\r\n                    diagrammidataa!\r\n                </Typography>\r\n                <Typography paragraph>\r\n                    Jos satut omistamaan ystäviä, voit lähettää heille kaveripyynnön ja lisätä heidät ystäviksesi.\r\n                    Tämän jälkeen voitte yhdessä tuumin puttailla toisianne.\r\n                </Typography>\r\n            </Paper>\r\n            <Paper className={tyylit.paper} data-aos=\"fade-up\">\r\n                <Typography variant=\"h4\">\r\n                    Vanhan pelin jatkaminen\r\n                </Typography>\r\n                <Typography paragraph>\r\n                    Jos haluat jatkaa vanhaa peliä, valitse 'vanhat pelit' -osiosta kyseinen peli ja paina aktivointinappia. Tämän\r\n                    jälkeen voit jatkaa tulosten kirjaamista 'uusi peli' -sivulla.\r\n                </Typography>\r\n                <Typography paragraph>\r\n                    Avoimen pelin tunnistaa oranssista kolmiosta.\r\n                </Typography>\r\n\r\n            </Paper>\r\n            <Paper className={tyylit.paper} data-aos=\"fade-up\">\r\n                <Typography variant=\"h4\">\r\n                    Pelin päättäminen\r\n                </Typography>\r\n                <Typography paragraph>\r\n                    Kun peli on päätetty peliasetukse sivulta, tulosten kirjaaminen estetään ja tulokset otetaan huomioon statistiikka-sivulla.\r\n                </Typography>\r\n            </Paper>\r\n\r\n\r\n        </Container>\r\n\r\n    )\r\n}\r\nexport default Etusivu\r\n","import { useMutation } from \"@apollo/client\"\r\nimport { Container, Typography, TextField } from \"@material-ui/core\"\r\nimport { useState } from \"react\"\r\nimport { Link } from \"react-router-dom\"\r\nimport { RESTORE_ACCOUNT } from \"../graphql/mutations\"\r\nimport Button from './Button'\r\n\r\nconst RestoreAccount = () => {\r\n    const [mailSent, setMailSent ] = useState(false)\r\n    const [ restoreAccount ] = useMutation( RESTORE_ACCOUNT )\r\n\r\n    const handleResetAccount = async (e) => {\r\n        e.preventDefault()\r\n        try {\r\n            await restoreAccount( { variables: { email: e.target.email.value }} )\r\n            setMailSent(true)\r\n        } catch (e) {\r\n            console.log(e)\r\n        }\r\n        e.target.email.value = ''\r\n    }\r\n\r\n    if (mailSent) {\r\n        return (\r\n            <Container>\r\n                <Typography variant=\"h4\" gutterBottom>Salasana lähetetty</Typography>\r\n                <Typography paragraph>Kertakäyttöinen salasana on lähetetty sähköpostiisi, olettaen että annoit\r\n                oikean sähköpostiosoitteen.</Typography>\r\n                <Typography paragraph>Tarkista sähköpostisi, sen jälkeen <Link to=\"/login\">kirjaudu sisään</Link>.</Typography>\r\n            </Container>\r\n        )\r\n    }\r\n    return (\r\n        <Container>\r\n            <Typography variant=\"h4\" gutterBottom>\r\n                Tunnuksen palautus\r\n            </Typography>\r\n            <Typography paragraph>\r\n                Kirjoita alla olevaan kenttään sähköpostiosoitteesi. Kertakäyttöinen salasana lähetetään antamaasi sähköpostiosoitteeseen.\r\n                Mikäli et koskaan liittänyt sähköpostiosoitetta tunnukseesi niin... tough luck.\r\n            </Typography>\r\n            <form onSubmit={handleResetAccount}>\r\n                <TextField label=\"Sähköpostiosoite\" name=\"email\" variant=\"outlined\" fullWidth />\r\n                <Button type=\"submit\">Palauta</Button>\r\n            </form>\r\n        </Container>\r\n    )\r\n}\r\nexport default RestoreAccount","import {  Container, Divider, Typography } from \"@material-ui/core\"\r\nimport { useDispatch } from \"react-redux\"\r\nimport { setNotification } from \"../reducers/notificationReducer\";\r\nimport Button from \"./Button\"\r\n\r\nconst DevPage = () => {\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const notify = (type) => {\r\n        dispatch( setNotification('Tämä on kokeilu!', type, 'Kokeilu'))\r\n    }\r\n\r\n    return (\r\n        <Container>\r\n            <Typography variant=\"h3\">DevPage</Typography>\r\n            <Typography variant=\"h5\">Tervetuloa salaiselle dev-sivulle!</Typography>\r\n            <Divider />\r\n            <Typography variant=\"h5\">Testaa notifikaatioita</Typography>\r\n            <Button onClick={() => notify('info')}>Info</Button>\r\n            <Button onClick={() => notify('success')}>Success</Button>\r\n            <Button onClick={() => notify('warning')}>Warning</Button>\r\n            <Button onClick={() => notify('error')}>Error</Button>\r\n        </Container>\r\n    )\r\n}\r\nexport default DevPage","import React, { useEffect, useState } from 'react';\nimport { Route, Switch } from 'react-router-dom'\n\nimport Notification from './components/Notification'\nimport Vetomenu from './components/Vetomenu'\nimport YlaPalkki from './components/YlaPalkki';\n\nimport Peli from './pages/Peli';\nimport Statsit from './pages/Statsit'\nimport LoginForm from './components/LoginForm'\nimport Kaverit from './pages/Kaverit'\nimport Asetukset from './pages/Asetukset'\nimport CreateUserForm from './pages/CreateUser';\nimport VanhatPelit from './pages/VanhatPelit';\nimport Etusivu from './pages/Etusivu'\n\nimport { setUser } from './reducers/userReducer';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport useGetMe from './hooks/useGetMe';\nimport RestoreAccount from './components/RestoreAccount';\nimport DevPage from './components/DevPage';\n\n\nfunction App() {\n\n  const [menuOpen, setMenuOpen] = useState(false)\n  const dispatch = useDispatch()\n  const user = useSelector(state => state.user)\n\n  const { me, loading } = useGetMe();\n\n  const openMenu = () => {\n    setMenuOpen(true)\n  }\n  useEffect(() => {\n    if (!loading && me != null && !user.user) {\n      dispatch(setUser(me.name, me.user))\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [me])\n\n  return (\n    <>\n      <div id=\"AppBar\">\n        <YlaPalkki openMenu={openMenu} />\n        <Vetomenu menuOpen={menuOpen} setMenuOpen={setMenuOpen} />\n\n        <Notification />\n      </div>\n      <div id=\"AppContent\">\n        <Switch>\n          <Route path=\"/kaverit\">\n            <Kaverit />\n          </Route>\n          <Route path=\"/login\" >\n            <LoginForm />\n          </Route>\n          <Route path=\"/vanhat\" >\n            <VanhatPelit />\n          </Route>\n          <Route path=\"/peli\">\n            <Peli />\n          </Route>\n          <Route path=\"/stats\">\n            <Statsit />\n          </Route>\n          <Route path=\"/dev\">\n            <DevPage />\n          </Route>\n          <Route path=\"/createUser\">\n            <CreateUserForm />\n          </Route>\n          <Route path=\"/asetukset\">\n            <Asetukset />\n          </Route>\n          <Route path=\"/palautus\">\n            <RestoreAccount />\n          </Route>\n          <Route path=\"/\">\n            <Etusivu />\n          </Route>\n        </Switch>\n      </div>\n    </>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://cra.link/PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://cra.link/PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import { setContext } from 'apollo-link-context'\r\nimport { ApolloClient, HttpLink, InMemoryCache, split } from '@apollo/client'\r\n\r\nimport { getMainDefinition } from '@apollo/client/utilities';\r\nimport { WebSocketLink } from '@apollo/client/link/ws'\r\n\r\n\r\nlet ApolloUri = 'https://rageputt.herokuapp.com/graphql'\r\nif (process.env.NODE_ENV !== 'production') {\r\n  console.log('Development mode selected!')\r\n  ApolloUri = 'http://localhost:4000/graphql'\r\n}\r\n\r\nconst httpLink = new HttpLink({ uri: ApolloUri })\r\n\r\nconst authLink = setContext((_, { headers }) => {\r\n  const token = localStorage.getItem('rageToken')\r\n  return {\r\n    headers: {\r\n      ...headers,\r\n      authorization: token ? `bearer ${token}` : null\r\n    }\r\n  }\r\n})\r\n\r\nconst socketLink = new WebSocketLink({\r\n  uri: (process.env.NODE_ENV !== 'production') ? 'ws://localhost:4000/graphql' : 'wss://rageputt.herokuapp.com/graphql',\r\n  options: {\r\n    reconnect: true\r\n  }\r\n})\r\n\r\nconst splitLink = split(\r\n  ({ query }) => {\r\n    const definition = getMainDefinition(query)\r\n    return (\r\n      definition.kind === 'OperationDefinition' &&\r\n      definition.operation === 'subscription'\r\n    )\r\n  },\r\n  socketLink,\r\n  authLink.concat(httpLink)\r\n\r\n)\r\n\r\nconst client = new ApolloClient({\r\n  cache: new InMemoryCache(),\r\n  link: splitLink,\r\n  connectToDevTools: true,\r\n})\r\n\r\nexport default client;","\r\nconst reducer = (state = {round: 0, roundId: null}, action) => {\r\n    switch(action.type) {\r\n        case 'INC_ROUND':\r\n            if (state.round < 19)\r\n                return {...state, round: state.round + 1 }\r\n            else return state;\r\n        case 'DEC_ROUND':\r\n            if (state.round >= 1)\r\n                return {...state, round: state.round - 1 } \r\n            else return state;\r\n        case 'SET_ID':\r\n            return { ...state, roundId: action.data.roundId }\r\n        case 'INIT_ROUND':\r\n            return action.data;\r\n        case 'RESET_ROUND':\r\n            return { round: 0, roundId: null }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default reducer;","import { combineReducers, createStore } from 'redux';\r\nimport tuloksetReducer from '../reducers/tuloksetReducer'\r\nimport userReducer from '../reducers/userReducer'\r\nimport notificationReducer from '../reducers/notificationReducer'\r\n\r\nconst reducers = combineReducers({\r\n    tulokset: tuloksetReducer,\r\n    user: userReducer,\r\n    notification: notificationReducer\r\n})\r\n\r\nconst store = createStore(reducers);\r\n\r\nexport default store\r\n","import { createMuiTheme, rgbToHex } from \"@material-ui/core\"\r\nimport { lightGreen, red } from \"@material-ui/core/colors\";\r\n\r\nconst theme = createMuiTheme({\r\n    typography: {\r\n        fontFamily: 'Quicksand',\r\n        fontWeightLight: 300,\r\n        fontWeightMedium: 500,\r\n        fontWeightRegular: 400,\r\n        fontWeightBold: 700,\r\n        h3: {\r\n            marginBottom: 15,\r\n        },\r\n        h4: {\r\n            marginBottom: 15,\r\n        },\r\n        h5: {\r\n            marginBottom: 15\r\n        },\r\n    },\r\n    palette: {\r\n        primary: {\r\n            main: '#aed581',\r\n        },\r\n        secondary: red,\r\n        action: {\r\n            disabled: '#8F8F8F'\r\n        },\r\n        success: {\r\n            main: 'rgba(76, 175, 80, 0.85)',\r\n            \r\n        },\r\n        info: {\r\n            main: 'rgba(33, 150, 243, 0.85)'\r\n        }\r\n    },\r\n    overrides: {\r\n        MuiAlert: {\r\n            root: {\r\n                borderRadius: 15,\r\n            },\r\n        },\r\n        MuiCard: {\r\n            root: {\r\n                borderRadius: 15,\r\n            }\r\n        },\r\n        MuiListItem: {\r\n            root: {\r\n                fontFamily: 'Quicksand',\r\n            },\r\n        },\r\n        MuiButton: {\r\n            root: {\r\n                borderRadius: 10,\r\n                fontFamily: 'Quicksand',\r\n                height: 40\r\n            },\r\n        },\r\n        MuiDivider: {\r\n            root: {\r\n                marginTop: 15,\r\n                marginBottom: 15,\r\n            }\r\n        },\r\n        MuiAppBar: {\r\n            root: {\r\n                borderRadius: 0\r\n            },\r\n        },\r\n        MuiTextField: {\r\n            root: {\r\n                backgroundColor: '#ffffff',\r\n            }\r\n        },\r\n        MuiOutlinedInput: {\r\n            root: {\r\n                borderRadius: 15,\r\n                backgroundColor: '#ffffff',\r\n\r\n            },\r\n        },\r\n        MuiPaper: {\r\n            root: {\r\n                borderRadius: 15,\r\n                padding: 10,\r\n            },\r\n        },\r\n        MuiContainer: {\r\n            root: {\r\n                paddingBottom: 10,\r\n                paddingTop: 10,\r\n                maxWidth: 700,\r\n            },\r\n        },\r\n    }\r\n});\r\nexport default theme;","import React from 'react';\nimport ReactDOM from 'react-dom'\n\nimport { Provider } from 'react-redux'\n\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\n\nimport { ApolloProvider } from '@apollo/client'\nimport { ThemeProvider } from '@material-ui/styles';\n\nimport client from './utils/apolloClient';\nimport store from './utils/store'\n\nimport theme from './utils/theme';\n\nReactDOM.render(\n  <ApolloProvider client={client}>\n    <Provider store={store}>\n      <Router>\n        <ThemeProvider theme={theme}>\n          <App />\n        </ThemeProvider>\n      </Router>\n    </Provider>\n  </ApolloProvider>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://cra.link/PWA\nserviceWorkerRegistration.register();\n\n"],"sourceRoot":""}